<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Favicons - go to http://realfavicongenerator.net/ for easy generation after you've designed your logo.-->
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00ae41">
	<meta name="theme-color" content="#ffffff">
  <meta name="robots" content="noindex,nofollow">
  <title>Gestionnaire de contenu</title>
  <link rel="stylesheet" href="https://unpkg.com/netlify-cms@^1.6.0/dist/cms.css" />
  <link rel="stylesheet" href="/admin/admin.css" />
</head>
<body>
  <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
  <script>
    // Register Preview CSS
    CMS.registerPreviewStyle("/css/admin.min.css");

    // Change articles preview template
    var PostPreview = createClass({
      render: function() {
        var entry = this.props.entry;
        var image = entry.getIn(['data', 'image']);
        var bg = this.props.getAsset(image);
        return h('div', {},
          h('div', {"className": "text"}, this.props.widgetFor('body'))
        );
      }
    });
    CMS.registerPreviewTemplate("articles", PostPreview);

    // Register the new widget for categories
    var CategoriesControl = createClass({
      handleChange: function(e) {
        this.props.onChange(e.target.value.split(',').map((e) => e.trim()));
      },

      render: function() {
        var value = this.props.value;
        return h('input', { type: 'text', "className": "nc-controlPane-widget", value: value ? value.join(', ') : '', onChange: this.handleChange });
      }
    });

    CMS.registerWidget('categories', CategoriesControl);
  </script>
</body>
</html>
